<html>
  <head>
      <title>CAPSULES</title>
  </head>
    
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="./assets/css/navbar.css" rel="stylesheet">
    
    <body>
            <div class="container">
                   <!-- Static navbar -->
                   <nav class="navbar navbar-default">
                    <div class="container-fluid">
                      <!-- Brand and toggle get grouped for better mobile display -->
                      <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                          <span class="sr-only">Toggle navigation</span>
                          <span class="icon-bar"></span>
                          <span class="icon-bar"></span>
                          <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="#">SpaceX Api</a>
                      </div>
                  
                      <!-- Collect the nav links, forms, and other content for toggling -->
                      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav">
                          <li class="active"><a href="index.html" >Home<span class="sr-only">(current)</span></a></li>
                          <li><a href="#" id="companyinfo" >Company Info</a></li>
                          <li><a href="#" id="apiinfo">Api Info</a></li>
                        </ul>
                      </div><!-- /.navbar-collapse -->
                    </div><!-- /.container-fluid -->
                  </nav>
                    <h4>CAPSULES DETAILS</h4>
                    
                    </br>

                    <button type="button" class="btn btn-primary" id="upcoming">Upcoming Capsules</button>
                <button type="button" class="btn btn-warning"  id="past">Past Capsules</button>
                <button type="button" class="btn btn-success" id="initial">Initial Capsules</button>
                  </br></br>
                    <div id="Launch">Loading ....</div>
                </div> <!-- /container -->
<!-- Modal classes -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        
           <h4 style="width:87%;text-align: center" class="modal-title">COMPANY INFO</h4>
      </div>
      <div class="modal-body" id="val">
        <p id="name"> </p>
        <p id="founder"></p>
        <p id="founded"></p>
        <p id="employees"></p>
        <p id="vehicles"></p>
        <p id="launchsites"></p>
        <p id="testsites"> </p>
        <p id="headquarters"> </p>
        <p id="summary"> </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


<!-- API Info -->
  <!-- Modal classes -->
<div id="apiInfo" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        
           <h4 style="width:87%;text-align: center" class="modal-title">API INFO</h4>
      </div>
      <div class="modal-body" id="val">
        <p id="projectname"> </p>
        <p id="version"></p>
        <p id="organization"></p>
        <p id="description"></p>
        <p id="project_link"></p>
        <p id="organization_link"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
            <!-- Modal classes -->
            <div id="myModalcapsules" class="modal fade" role="dialog">
                    <div class="modal-dialog" >
                  
                      <!-- Modal content-->
                      <div class="modal-content" style="width:auto;" >
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal">&times;</button>
                          <h4 class="modal-title"></h4>
                        </div>
                        <div class="modal-body" id="val">
                            <p id="capsule1">
                                <p id="capsule2"> </p>
                                <p id="capsule3"></p>
                                <p id="capsule4"></p>
                                <p id="capsule5"></p>
                                <p id="capsule6"></p>
                                <p id="mission1" ></p><p id="capsule7" ></p> 
                                <p id="capsule8"></p>
                                <p id="capsule9"></p>
                                <p id="capsule10"></p>
                                <p id="capsule11"></p>
                                <p id="capsule11"></p>
                            </p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                      </div>
                  
                    </div>
                  </div>
                 
            <script src="./assets/js/jquery.min.js"></script>
            <script src="./assets/js/bootstrap.min.js"></script>
            <script type="text/javascript">
            $(document).ready(function()
            {
                function jsUcfirst(string){
                    return string.charAt(0).toUpperCase() + string.slice(1);
                }

               
                $("#upcoming").click(function(){
                    $.ajax({
                        url:"https://api.spacexdata.com/v3/capsules/upcoming",
                        success: function(res){
                                 //$("#Launch").html(res);
                        $("#Launch").empty();
                        var $ul=$("<span/>").addClass("list-group");
                        res.forEach(r=> {
                            var Cserial=$("<p/>").html('<b>Capsule Serial: </b>'+r.capsule_serial);
                            var cid=$("<p/>").html('<b>Capsule id:</b>' +r.capsule_id); 
                            var status=$("<p/>").html('<b>Status:</b>' +r.status); 
                            var original_launch=$("<p/>").html('<b>Original Launch:</b>' +r.original_launch); 
                            var original_launch_unix=$("<p/>").html('<b>Original launch unix:</b>' +r.original_launch_unix); 
                            var landings=$("<p/>").html('<b>Landings:</b>' +r.landings); 
                            var type=$("<p/>").html('<b>Type:</b>' +r.type); 
                            var details=$("<p/>").html('<b>Details:</b>' +r.details); 
                            var reuse_count=$("<p/>").html('<b>Reuse count:</b>' +r.reuse_count); 
                            var liconntent=$("<div/>");
                            liconntent.append(Cserial);
                            liconntent.append(status);
                            liconntent.append(original_launch);
                            liconntent.append(original_launch_unix);
                            liconntent.append(landings);
                            liconntent.append(type);
                            liconntent.append(details);
                            liconntent.append(reuse_count);
                           
                            var lielement=$("<span/>").addClass("list-group-item").append(liconntent);
                
                            
                           $ul.append(lielement);
                        });
                        $("#Launch").append($ul);

                        }
                    })
                });

                $("#past").click(function(){
                    $.ajax({
                        url:"https://api.spacexdata.com/v3/capsules/past",
                        success: function(res){
                                 //$("#Launch").html(res);
                        $("#Launch").empty();
                        var $ul=$("<span/>").addClass("list-group");
                        res.forEach(r=> {
                            var Cserial=$("<p/>").html('<b>Capsule Serial: </b>'+r.capsule_serial);
                            var cid=$("<p/>").html('<b>Capsule id:</b>' +r.capsule_id); 
                            var status=$("<p/>").html('<b>Status:</b>' +r.status); 
                            var original_launch=$("<p/>").html('<b>Original Launch:</b>' +r.original_launch); 
                            var original_launch_unix=$("<p/>").html('<b>Original launch unix:</b>' +r.original_launch_unix); 
                            var landings=$("<p/>").html('<b>Landings:</b>' +r.landings); 
                            var type=$("<p/>").html('<b>Type:</b>' +r.type); 
                            var details=$("<p/>").html('<b>Details:</b>' +r.details); 
                            var reuse_count=$("<p/>").html('<b>Reuse count:</b>' +r.reuse_count); 
                            var liconntent=$("<div/>");
                            liconntent.append(Cserial);
                            liconntent.append(status);
                            liconntent.append(original_launch);
                            liconntent.append(original_launch_unix);
                            liconntent.append(landings);
                            liconntent.append(type);
                            liconntent.append(details);
                            liconntent.append(reuse_count);
                            var lielement=$("<span/>").addClass("list-group-item").append(liconntent);
                            r.missions.forEach(function(mission){
                                for(var key in mission){
                                    var name=$("<p/>").html('<b>'+jsUcfirst(key)+"</b> : "+mission[key]);
                                    liconntent.append(name);
                                }  
                            })
                                
                           $ul.append(lielement);
                        });
                        $("#Launch").append($ul);

                        }
                    })
                });

                
                $("#initial").click(function(){
                    $.ajax({
                    url:"https://api.spacexdata.com/v3/capsules",
                    success: function(result){
                        $("#Launch").empty();
                        var $ul=$("<span/>").addClass("list-group");
                        result.forEach(r=> {
                            var Cserial=$("<p/>").html('<b>Capsule Serial: </b>'+r.capsule_serial);
                            var cid=$("<p/>").html('<b>Capsule id:</b>' +r.capsule_id); 
                            var detailButton=$("<Button data-toggle= modal  data-target=myModal  data-id="+r.capsule_serial+"/>").text("Details").addClass("btn btn-info")
                            detailButton.on("click",knowDetails);
                            var liconntent=$("<div/>");
                            liconntent.append(Cserial);
                            liconntent.append(cid);
                            liconntent.append(detailButton)
                            var lielement=$("<span/>").addClass("list-group-item").append(liconntent);
                           $ul.append(lielement);
                        });
                        $("#Launch").append($ul);
                    }
                })
                });

                function knowDetails()
                {
                        var site_Id=$(this).data("id");
                        var ul = $('ul');   
                        var $ulOne=$("<ul/>").addClass("list-group");
                        $.ajax({
                            url:"https://api.spacexdata.com/v3/capsules/"+site_Id,   
                            
                            success:function(res){
                                var liconntent=$("<div/>");
                                 $("#capsule7").empty();
                                $("#capsule2").html('<b>Capsule Serial:</b>'+res.capsule_serial);
                                $("#capsule3").html('<b>Capsule id:</b>'+res.capsule_id); 
                                $("#capsule4").html('<b>Status:</b>'+res.status); 
                                $("#capsule5").html('<b>Original launch:</b>'+res.original_launch);
                                $("#capsule6").html('<b>Original launch unix:</b>'+res.original_launch_unix);
                                $("#capsule8").html('<b>Landings:</b>'+res.landings);
                                $("#capsule9").html('<b>Type:</b>'+res.type);
                                $("#capsule10").html('<b>Details:</b>'+res.details);
                                $("#capsule11").html('<b>Reuse count:</b>'+res.reuse_count);
                                $("#mission1").html('<b>Capsule Missions:</b>');
                               
                                res.missions.forEach(function(mission){
                                    for(var key in mission){
                                        $("#capsule7").append($("<p style='margin-left:20px'/>").html('<b>'+jsUcfirst(key)+"</b> : "+mission[key]));
                                    }  
                                })
                                
                               
                                $('#myModalcapsules').modal('toggle');
                            
                            }
                        })
                      
                }
                $.ajax({
                    url:"https://api.spacexdata.com/v3/capsules",
                    success: function(result){
                        $("#Launch").empty();
                        var $ul=$("<span/>").addClass("list-group");
                        result.forEach(r=> {
                            var Cserial=$("<p/>").html('<b>Capsule Serial: </b>'+r.capsule_serial);
                            var cid=$("<p/>").html('<b>Capsule id:</b>' +r.capsule_id); 
                            var detailButton=$("<Button data-toggle= modal  data-target=myModal  data-id="+r.capsule_serial+"/>").text("Details").addClass("btn btn-info")
                            detailButton.on("click",knowDetails);
                            var liconntent=$("<div/>");
                            liconntent.append(Cserial);
                            liconntent.append(cid);
                            liconntent.append(detailButton)
                            var lielement=$("<span/>").addClass("list-group-item").append(liconntent);
                           $ul.append(lielement);
                        });
                        $("#Launch").append($ul);
                    }
                })
            });
            </script>
        <script src="assets/js/scriptsmodel.js"></script>
    </body>
</html>