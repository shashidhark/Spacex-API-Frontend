<html>
  <head>
    <style>
  #map {
        height: 100%;
      }
    </style>
  </head>
    <title>Launch Pads</title>
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="./assets/css/navbar.css" rel="stylesheet">
    <body>
            <div class="container">
                    <!-- Static navbar -->
                    <nav class="navbar navbar-default">
                      <div class="container-fluid">
                        <div class="navbar-header">
                          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                          </button>
                          <a class="navbar-brand" href="#">Spacex API</a>
                        </div>
                       
                      </div><!--/.container-fluid -->
                    </nav>
                    <h4>Launch Pads</h4>
                    <div id="Launch">Loading ....</div>
                </div> <!-- /container -->

            <!-- Modal classes -->
            <div id="myModal" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                  
                      <!-- Modal content-->
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal">&times;</button>
                          <h4 class="modal-title">SpaceX API Launch Pads</h4>
                        </div>
                        <div class="modal-body" id="val">
                          <p id="status"> </p>
                          <p id="locationName"></p>
                          <p id="vehiclesLaunced"></p>
                          <p id="siteName"></p>
                          <p id="attempted_launches"></p>
                          <p id="successful_launches"></p>
                          <p id="details"> </p>
                          <div id = "map" ></div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                      </div>
                  
                    </div>
                  </div>
            <script src="./assets/js/jquery.min.js"></script>
            <script src="./assets/js/bootstrap.min.js"></script>
            <script type="text/javascript">
            $(document).ready(function()
            {
                function knowDetails()
                {
                        var site_Id=$(this).data("id");
                      
                       
                        var $ulOne=$("<ul/>").addClass("list-group");
                        $.ajax({
                            url:"https://api.spacexdata.com/v3/launchpads/"+site_Id,   
                            
                            success:function(res){
                                    $("#status").text("Status:"+res.status); 
                                    $("#locationName").text("Location Name:"+res.location.name); 
                                    $("#vehiclesLaunced").text("Vehicles Launched:"+res.vehicles_launched); 
                                    $("#siteName").text("Site Name:"+res.site_name_long); 
                                    $("#attempted_launches").text("Attempted Launches:"+res. attempted_launches); 
                                    $("#successful_launches").text("Successful Launches:"+res.successful_launches); 
                                    $("#details").text("Details:"+res.deails); 
                                let  latitude1=res.location.latitude;
                                let  longitude1=res.location.longitude;
                                let  lName=res.location.name;
                                     loadMap(latitude1,longitude1,lName);
                            
                                
                                       $('#myModal').modal('toggle');
                            
                                     }
                                    })
                      
                                  }
                $.ajax({
                    url:"https://api.spacexdata.com/v3/launchpads",
                    success: function(result){
                        $("#Launch").empty();
                        var $ul=$("<ul/>").addClass("list-group");
                        result.forEach(r=> {
                            var id=$("<p/>").text("id:  "+r.id);
                            var status=$("<p/>").text("status:"+r.status);
                            var Location=$("<p/>").text("Location:"+r.location.name);
                            var detailButton=$("<Button data-toggle= modal  data-target=myModal  data-id="+r.site_id+"/>").text("Details").addClass("btn btn-info btn-lg")
                            detailButton.on("click",knowDetails);
                            var liconntent=$("<div/>");
                            liconntent.append(id);
                            liconntent.append(status);
                            liconntent.append(Location);
                            liconntent.append(detailButton)
                            var lielement=$("<li/>").addClass("list-group-item").append(liconntent);
                            $ul.append(lielement);
                        });
                        $("#Launch").append($ul);
                    }
                })
               
            });
            </script>
          <script>
       
        //    function getJSONMarkers() {
        //      debugger
        //   const markers = [
        //     // {
        //     //   name:  "Rixos The Palm",
        //     //   location: [Number(lt), Number(lg)]
        //     // }
        //     {
        //       name: "Shangri-La Hotel",
        //       location: [25.2084, 55.2719]
        //     },
        //     {
        //       name: "Grand Hyatt",
        //       location: [25.2285, 55.3273]
        //     }
        //   ];
        //   return markers;
        // }

        function getJSONMapMarkers(lt,lg,lname) {
          const markers = [
            {
              name:  lname,
              location: [Number(lt), Number(lg)]
            }
          ];
          return markers;
        }


        function loadMap(lt,lg,lname) {
          // Initialize Google Maps
          var styledMapType = new google.maps.StyledMapType(
            [
            {elementType: 'geometry', stylers: [{color: '#ebe3cd'}]},
              {elementType: 'labels.text.fill', stylers: [{color: '#523735'}]},
              {elementType: 'labels.text.stroke', stylers: [{color: '#f5f1e6'}]},
              {
                featureType: 'administrative',
                elementType: 'geometry.stroke',
                stylers: [{color: '#c9b2a6'}]
              },
              ]
              {name: 'Styled Map'});
              
          const mapOptions = {
            center:new google.maps.LatLng(25.2048, 55.2708),
            zoom: 4,
            mapTypeControlOptions: {
            mapTypeIds: ['roadmap', 'satellite', 'hybrid', 'terrain','styled_map']
            }
          }
          const map = new google.maps.Map(document.getElementById("map"), mapOptions);

          // Load JSON Data
          const hotelMarkers = getJSONMapMarkers(lt,lg,lname);

          // Initialize Google Markers
          for(hotel of hotelMarkers) {
            let marker = new google.maps.Marker({
              map: map,
              position: new google.maps.LatLng(hotel.location[0], hotel.location[1]),
              title: hotel.name
            })
          }
        }
             
          </script>
          
             <script src = "https://maps.googleapis.com/maps/api/js"></script>
              

    </body>
</html>